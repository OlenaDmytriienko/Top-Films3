(function(){"use strict";var e={5660:function(e,a,i){var t=i(9963),s=(i(7658),i(6252)),r=i(2262),n=i(3577),o=i.p+"img/1479.0498db91.gif",l=i.p+"img/cinema.f323d80d.png";const h={class:"container"},c={class:"header header-content"},g=(0,s._)("a",{href:"./index.html",class:"header__logo"},"Top Films",-1),u=(0,s._)("option",{value:""},null,-1),d=["value"],m=(0,s._)("option",{value:""},null,-1),p=(0,s._)("option",{value:"RATING"},"По рейтингу",-1),_=(0,s._)("option",{value:"YEAR"},"По году",-1),v=[m,p,_],f=(0,s._)("option",{value:"4"},"Мелодрама",-1),y=(0,s._)("option",{value:"5"},"Детектив",-1),w=(0,s._)("option",{value:"6"},"Фантастика",-1),k=(0,s._)("option",{value:"7"},"Приключения",-1),b=(0,s._)("span",null,null,-1),S={class:"container today"},F={class:"movie__today"},C={class:"movie1"},O=["src","alt"],Y={class:"movie__info"},z={class:"movie__t"},A={class:"modal__year"},D={class:"container main"},R={class:"loading__box"},M=["src"],P={class:"movies"},T=["onClick"],G=["onClick"],j=["src","alt"],I=(0,s._)("div",{class:"movie__cover--darkened"},null,-1),U={class:"movie__info"},x={class:"movie__title"},K={class:"movie__category"},N={key:0,class:"movie__average movie__average--green"},E={key:1,class:"movie__average movie__average--orange"},J={key:2,class:"movie__average movie__average--red"},Q={key:3,class:"movie__average movie__average--green"},V={key:4,class:"movie__average movie__average--orange"},q={key:5,class:"movie__average movie__average--red"},H={id:"myModal",class:"modal"},L={class:"modal__container"},X=["src","alt"],B={class:"modal__box"},W={class:"modal__title"},Z={class:"modal__year"},$={class:"modal__text"},ee={class:"modal__pg"},ae=(0,s.Uk)(),ie={class:"loading__box"},te=["src"],se={name:"App",data(){return{api:"https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS",out:"",simbol:"",simbolYear:"",simbolYearFrom:"",form:{searchQuery:""},searchQuery:"",page:1,pageString:"&page=",order:"",orderString:"order=",genres:"",genresString:"genres=",yearFrom:"",yearFromString:"yearFrom=",yearToString:"yearTo=",defaultImg:l,apiArray:[],restaurants:[],restaurant:[],modalRestaurant:[],error:null,visible:!1,loading:!1,loading1:!1,headers:{"Content-Type":"application/json","X-API-KEY":"236d1c9c-2de0-4ab3-a57f-f871ba0334a2"}}},methods:{AP(){},async popular(){console.log(this.page),this.page++,0===this.apiArray.length?await this.filter(this.api+this.pageString+this.page.toString()):await this.filterGenres(this.api+this.pageString+this.page.toString()),console.log(this.api+this.pageString+this.page.toString())},async SerchFilms(e){this.page=1,this.api="https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword="+e,await this.filter(this.api)},async Details(e){void 0!=e&&(this.visible=!0,await this.modal("https://kinopoiskapiunofficial.tech/api/v2.2/films/"+e))},async FilterGenres(){this.page=1,this.apiArray=[],""!=this.genres&&this.apiArray.push(this.genresString+this.genres),""!=this.order&&this.apiArray.push(this.orderString+this.order),""!=this.yearFrom&&this.apiArray.push(this.yearFromString+this.yearFrom+"&"+this.yearToString+this.yearFrom),this.api="https://kinopoiskapiunofficial.tech/api/v2.2/films?"+this.apiArray.join("&"),await this.filterGenres(this.api),this.loading=!1},async filter(e){this.loading=!0,console.log(e);try{const a=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(a),1==this.page?this.restaurants=a.films:this.restaurants=this.restaurants.concat(a.films),this.loading=!1}catch(a){this.error=a}},async modal(e){try{const a=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(a.description),this.modalRestaurant=a}catch(a){this.error=a}},async filterGenres(e){this.loading=!0;try{const a=await fetch(e,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(a),1==this.page?this.restaurants=a.items:this.restaurants=this.restaurants.concat(a.items),this.loading=!1,this.loading1=!1}catch(a){this.error=a,this.loading=!1}},parseJSON:function(e){return e.json?e.json():e},checkStatus:function(e){return e.status>=200&&e.status<300?e:this.parseJSON(e).then((e=>{throw e}))},onChange(e){this.simbol=e.target.value,console.log(e.target.value),this.genres=e.target.value,this.FilterGenres(),this.loading1=!0},onChangeYear(e){this.simbolYear=e.target.value,console.log(e.target.value),this.order=e.target.value,this.FilterGenres(),this.loading1=!0},onChangeYearFrom(e){this.simbolYearFrom=e.target.value,console.log(e.target.value),this.yearFrom=e.target.value,this.FilterGenres(),this.loading1=!0},searchValue(e){this.searchQuery=e.target.value,console.log(e.target.value),this.SerchFilms(e.target.value)},drawItems(e){this.popular(e.page++)},getMissingImg(e){return this.restaurants[e]?.posterUrlPreview??this.defaultImg},getMissingName(e){return this.restaurants[e]?.nameRu??" "},getMissingGenres(e){return this.restaurants[e]?.nameRu??" "}},async mounted(){this.loading1=!0;try{const e=await fetch(this.api,{method:"GET",headers:this.headers}).then(this.checkStatus).then(this.parseJSON);console.log(e),console.log(Math.floor(101*Math.random())+1),this.restaurants=e.films,this.restaurant=e.films[Math.floor(20*Math.random())+1],this.loading1=!1}catch(e){this.error=e,this.loading1=!1}}};var re=Object.assign(se,{setup(e){return(e,a)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",h,[(0,s._)("div",c,[g,(0,s.wy)((0,s._)("select",{name:"",id:"year1",class:"header__year1 action","onUpdate:modelValue":a[0]||(a[0]=e=>(0,r.dq)(simbolYearFrom)?simbolYearFrom.value=e:null),onChange:a[1]||(a[1]=a=>e.onChangeYearFrom(a))},[u,((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(100,(e=>(0,s._)("option",{value:e+1922,key:e+1922},(0,n.zw)(e+1922),9,d))),64))],544),[[t.bM,e.simbolYearFrom]]),(0,s.wy)((0,s._)("select",{name:"",id:"year",class:"header__year action","onUpdate:modelValue":a[2]||(a[2]=e=>(0,r.dq)(simbolYear)?simbolYear.value=e:null),onChange:a[3]||(a[3]=a=>e.onChangeYear(a))},v,544),[[t.bM,e.simbolYear]]),(0,s.wy)((0,s._)("select",{name:"",id:"genre",class:"header__genre action","onUpdate:modelValue":a[7]||(a[7]=e=>(0,r.dq)(simbol)?simbol.value=e:null),onChange:a[8]||(a[8]=a=>e.onChange(a))},[(0,s._)("option",{value:"1",onClick:a[4]||(a[4]=a=>e.AP())},"Tриллер"),(0,s._)("option",{value:"2",onClick:a[5]||(a[5]=a=>e.AP())},"Драма"),(0,s._)("option",{value:"3",onClick:a[6]||(a[6]=a=>e.AP())},"Криминал"),f,y,w,k],544),[[t.bM,e.simbol]]),b,(0,s._)("form",null,[(0,s.wy)((0,s._)("input",{type:"text",class:"header__search",placeholder:"Search",onInput:a[9]||(a[9]=a=>e.searchValue(a)),"onUpdate:modelValue":a[10]||(a[10]=a=>e.form.searchQuery=a)},null,544),[[t.nr,e.form.searchQuery]])])])]),(0,s._)("div",S,[(0,s._)("div",F,[(0,s._)("div",C,[(0,s._)("img",{src:e.restaurant.posterUrlPreview,alt:e.restaurant.nameRu,class:"movie__cover1"},null,8,O),(0,s._)("div",Y,[(0,s._)("div",z,(0,n.zw)(e.restaurant.nameRu),1),(0,s._)("p",A,(0,n.zw)(e.restaurant.year),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.restaurant.genres,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"movie__c",key:e.genre},(0,n.zw)(e.genre),1)))),128))])])])]),(0,s._)("div",D,[(0,s.Uk)((0,n.zw)(e.searchQuery)+" ",1),(0,s._)("div",R,[(0,s.wy)((0,s._)("span",null,[(0,s._)("img",{class:"loading",src:(0,r.SU)(o),alt:"loading"},null,8,M)],512),[[t.F8,e.loading1]])]),(0,s._)("div",P,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.restaurants,((a,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"movie",onClick:i=>e.Details(a.kinopoiskId),key:a.kinopoiskId},[(0,s._)("div",{class:"movie__cover-inner",onClick:i=>e.Details(a.filmId)},[(0,s._)("img",{src:e.getMissingImg(i),alt:e.getMissingName(i),class:"movie__cover"},null,8,j),I],8,G),(0,s._)("div",U,[(0,s._)("div",x,(0,n.zw)(e.getMissingName(i)),1),(0,s._)("div",K,(0,n.zw)(a?.genres?.map((e=>e?.genre)).join(", ")??" "),1),a?.rating>=7?((0,s.wg)(),(0,s.iD)("div",N,(0,n.zw)(a?.rating),1)):a?.rating>5?((0,s.wg)(),(0,s.iD)("div",E,(0,n.zw)(a?.rating),1)):a?.rating<=5?((0,s.wg)(),(0,s.iD)("div",J,(0,n.zw)(a?.rating),1)):(0,s.kq)("",!0),a?.ratingKinopoisk>=7?((0,s.wg)(),(0,s.iD)("div",Q,(0,n.zw)(a?.ratingKinopoisk),1)):a?.ratingKinopoisk>5?((0,s.wg)(),(0,s.iD)("div",V,(0,n.zw)(a?.ratingKinopoisk),1)):a?.ratingKinopoisk<=5?((0,s.wg)(),(0,s.iD)("div",q,(0,n.zw)(a?.ratingKinopoisk),1)):(0,s.kq)("",!0)])],8,T)))),128))])]),(0,s.wy)((0,s._)("div",H,[(0,s._)("span",{class:"close",onClick:a[11]||(a[11]=a=>e.visible=!1)},"×"),(0,s._)("div",L,[(0,s._)("img",{class:"modal-content",id:"img01",src:e.modalRestaurant.posterUrlPreview,alt:e.modalRestaurant.nameOriginal},null,8,X),(0,s._)("div",B,[(0,s._)("h4",W,(0,n.zw)(e.modalRestaurant.nameOriginal),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.modalRestaurant.genres,(e=>((0,s.wg)(),(0,s.iD)("h5",{class:"modal__genre",key:e},(0,n.zw)(e.genre),1)))),128)),(0,s._)("p",Z,(0,n.zw)(e.modalRestaurant.year),1),(0,s._)("div",$,(0,n.zw)(e.modalRestaurant.description),1),(0,s._)("p",ee,(0,n.zw)(e.modalRestaurant.ratingAgeLimits),1)])])],512),[[t.F8,e.visible]]),ae,(0,s._)("div",ie,[(0,s.wy)((0,s._)("span",null,[(0,s._)("img",{class:"loading",src:(0,r.SU)(o),alt:"loading"},null,8,te)],512),[[t.F8,e.loading]])]),(0,s._)("button",{class:"next__page",onClick:a[13]||(a[13]=a=>e.popular())},[(0,s._)("span",{onClick:a[12]||(a[12]=a=>e.AP())},"Show more")])],64))}});const ne=re;var oe=ne;const le=(0,t.ri)(oe);le.mount("#app")}},a={};function i(t){var s=a[t];if(void 0!==s)return s.exports;var r=a[t]={exports:{}};return e[t](r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(a,t,s,r){if(!t){var n=1/0;for(c=0;c<e.length;c++){t=e[c][0],s=e[c][1],r=e[c][2];for(var o=!0,l=0;l<t.length;l++)(!1&r||n>=r)&&Object.keys(i.O).every((function(e){return i.O[e](t[l])}))?t.splice(l--,1):(o=!1,r<n&&(n=r));if(o){e.splice(c--,1);var h=s();void 0!==h&&(a=h)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,s,r]}}(),function(){i.d=function(e,a){for(var t in a)i.o(a,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){i.p=""}(),function(){var e={143:0};i.O.j=function(a){return 0===e[a]};var a=function(a,t){var s,r,n=t[0],o=t[1],l=t[2],h=0;if(n.some((function(a){return 0!==e[a]}))){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(l)var c=l(i)}for(a&&a(t);h<n.length;h++)r=n[h],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},t=self["webpackChunkmy_app"]=self["webpackChunkmy_app"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=i.O(void 0,[998],(function(){return i(5660)}));t=i.O(t)})();
//# sourceMappingURL=app.0194960c.js.map